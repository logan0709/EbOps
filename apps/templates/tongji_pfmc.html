{% extends 'base.html' %}
{% block custom_head_css_js %}
<link rel="stylesheet" href="{{ url_for('static',filename='css/plugins/datepicker/datepicker3.css') }}"/>
<script src="{{ url_for('static',filename='js/plugins/datepicker/bootstrap-datepicker.js') }}"></script>
{% endblock %}
{% block content %}
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="" id="content_start">
        <style>
            #search_btn {margin-bottom: 0;}
        </style>
        <form id="search_form" method="get" action="" class="pull-right form-inline">
            <div class="form-group" id="date">
                <div class="input-daterange input-group" id="datepicker">
                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                    <input type="text" id="id_date" class="input-sm form-control" style="width: 100px;" name="date" value="">
                </div>
            </div>
            <div class="input-group">
                <div class="input-group-btn">
                    <button id="search_btn" type="submit" class="btn btn-sm btn-primary">
                        搜索
                    </button>
                </div>
            </div>
        </form>

    </div>
    <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
        <div class="row">
            <div class="col-sm-6">
                <h4><span class="label label-default">{{ date }}</span></h4>
            </div>
            <div class="col-sm-6"></div>
		</div>
        <div class="row">
            <div class="col-lg-4">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>CPU</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>网元</th>
                                <th>最大值项:(%)</th>
                                <th>主机</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for cpu in cpu_data %}
                            <tr>
                                {% if cpu[1] >= 80 %}
                                <td><span class="label label-danger">{{ cpu[0] }}</span></td>
                                {% else %}
                                <td><small> {{ cpu[0] }}</small></td>
                                {% endif %}
                                <td><small>{{ cpu[1] }}</small></td>
                                <td><small>{{ cpu[2] }}</small></td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>内存</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>网元</th>
                                <th>最大值项:(%)</th>
                                <th>主机</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for mem in mem_data %}
                            <tr>
                                {% if mem[1] >= 80 %}
                                <td><span class="label label-danger">{{ mem[0] }}</span></td>
                                {% else %}
                                <td><small>{{ mem[0] }}</small></td>
                                {% endif %}
                                <td><small>{{ mem[1] }}</small></td>
                                <td><small>{{ mem[2] }}</small></td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="ibox float-e-margins">
                    <div class="ibox-title">
                        <h5>磁盘IO</h5>
                        <div class="ibox-tools">
                            <a class="collapse-link">
                                <i class="fa fa-chevron-up"></i>
                            </a>
                            <a class="close-link">
                                <i class="fa fa-times"></i>
                            </a>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>网元</th>
                                <th>最大值项:(%)</th>
                                <th>主机</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for io_d in io_data %}
                            <tr>
                                {% if io_d[1] >= 50 %}
                                <td><span class="label label-danger">{{ io_d[0] }}</span></td>
                                {% else %}
                                <td><small>{{ io_d[0] }}</small></td>
                                {% endif %}
                                <td><small>{{ io_d[1] }}</small></td>
                                <td><small>{{ io_d[2] }}</small></td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
        $('.input-daterange.input-group').datepicker({
            format: "yyyymmdd",
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: false,
            calendarWeeks: true,
            autoclose: true
        });
    })
</script>
{% endblock %}